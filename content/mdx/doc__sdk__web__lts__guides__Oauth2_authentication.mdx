---
title: "CPaaS SDK for business communication solutions | Rainbow"
description: "Add chat, conference, real time collaboration and communication (PBX, VoIP, P2P) capabilities, bots and more to your business applications."
type: "sdk"
source: "https://developers.openrainbow.com/doc/sdk/web/lts/guides/Oauth2_authentication"
lastSynced: "2026-02-20T07:12:26.898Z"
---
# Documentation

OAuth2 authentication

LTS release 4.0.0Published on 2022-12-21

## OAuth Authentication

This tutorial shows how you can use OAuth 2.0 authentication method in your application.

Rainbow uses [OAuth 2.0 protocol](https://tools.ietf.org/html/rfc6749) to ensure authentication and authorization.

One of the advantages of using OAuth 2.0 protocol is removing the responsibility for storing the user credentials from the third-party applications developers. Also, by outsourcing the authentication flow to Rainbow servers, the developers no longer need to maintain their own servers and ensure the application of numerous security measures.

It also provides a set of advantages for the users who want to restrict the usage of their personal data linked to a Rainbow account. With OAuth 2.0 the users can also limit or even revoke the access of the third-party applications to their data.

The main principle of OAuth 2.0 protocol is to separate the role of the client from that of the resource owner (Rainbow).

#### Basic Concepts

The basic idea behind the OAuth 2.0 is to ensure a protocol flow between the three (optionally four) principal roles explained in the context of Rainbow flow below:

1.  **Resource owner** - user providing an access to his data (protected resource)
2.  **Resource server** - Rainbow server hosting the protected resources
3.  **Client** - Third-party application trying to access resources on behalf of the Resource Owner
4.  **Authorization server** - Server which sends the authorization token to the Resource server

Currently Rainbow Web SDK supports the so called *Implicit flow* which facilitates the authentication process for Single Page Applications written in JavaScript (or one of its frameworks). It excludes the necessity of involving an Authorization Server in the process. However, this approach has some limitations: the token is valid for only one hour. After that time it is required for user to run the sign in procedure again.

#### Access token

Access token is a string issued by **Resource server** (Rainbow server) to the **Client** (third-party application). It represents the authorization to access **Resources**. The end goal of the quite complicated OAuth 2.0 protocol process is to issue the token to the client and ensure secure access to the user data.

Token replaces username and password by providing and abstraction layer. Therefore, once obtained, **Access Token** relieve the third-party applications from a duty of securing and keeping user data.

**Access token** is a simplification of the idea of authentication, as it is represented by a single string understood by the **Resource server**.

#### Requirements

In order to use the benefits of OAuth 2.0 protocol in your application using Rainbow Web SDK, you need to follow the process of [creating an application in our Rainbow for Developers](doc/sdk/web/lts/guides/Getting_Started).

You will need two basic pieces of information:

1.  **Application ID** - ID of the application generated by Rainbow for Developers.
2.  **Redirect URI** - a URI of your choice that the user will be redirected to after giving a consent for your application to use his protected resources

You can set **Redirect URI** either via Rainbow for Developers or Rainbow CLI. It is extremely important for the functioning of your application as our server will verify it each time a user will try to connect to Rainbow through your application. It is also the first and foremost layer of security granted by the Implicit flow.

To set a `redirect_uri` attribute and assign it to your application, use `rainbow-cli` tool:

```shell
rbw application set-redirecturi YOURAPPID YOURREDIRECTURI
```

For more information on the application lifecycle, you can read the tutorial [Application lifecycle](/docs/hub/application-lifecycle).

### Implicit flow

OAuth's implicit flow assumes that the **Resource server** can provide the protected resource based only on the Application ID.

In order to use the implicit flow, you need to fully agree to all the security levels it proposes (see the part about security). To do so, go to `rainbow-cli` tool and run the following command in your shell:

```shell
rbw application set-implicitgrant YOURAPPID
```

You can revoke your application's authorization to use implicit flow by running the following command:

```shell
rbw application unset-implicitgrant YOURAPPID
```

To obtain the **Authentication Token** via the Implicit Flow, follow the steps below:

1.  **Direct user to Rainbow authorization URL**

Your first action is to redirect a user to the Rainbow authorization page. In order to do so, you will need to build the **redirect link** that will consist of few mandatory parts:

-   **Rainbow Host URL** - this parameter will always stay the same: `https://RAINBOW_SERVER/api/rainbow/authentication/v1.0/oauth/authorize?`
    
-   **Response type** - parameter defining the type of response. As above, this part will stay the same in all of your requests: `response_type=token`
    
-   **Application ID** - this is the part when you need to provide your application ID in the following format: `&client_id=YOURAPPLICATIONID`
    
-   **Redirect URI** - another parameter that will define and protect your application (see previous step): `&redirect_uri=https://YOURREDIRECTURI`
    
-   **State** - a random string generated by your client, used to confirm the identity of your page: `&state=YOURRANDOMSTRING`. The role of **State** is to minimize the risk of [CSRF attacks](https://en.wikipedia.org/wiki/Cross-site_request_forgery). Once generated, the string should be stored somewhere in your application (i.e. in state) to allow you to verify it against the Rainbow Server's response upon the arrival to your **Redirect URI**;
    
-   **Scope** - scope of the data that your application will need from Rainbow: `&scope=all`
    
-   **Email** - (optional) email address that will be used to prefill the form of the Rainbow OAuth login page `&loginEmail=example@email.com`
    

Example of a **redirect link** that would redirect a user to Rainbow Sandbox platform in order to ask for the credentials would look like that:

```
const redirectURL = 'https://sandbox.openrainbow.com/api/rainbow/authentication/v1.0/oauth/authorize?response_type=token&client_id=a94819sfas..4124&redirect_uri=https://mysecurewebsite.com&state=123qwerty&scope=all&loginEmail=example@email.com'
```

You can then simply redirect your application to the newly-formed URL link:

```javascript
// one of the options:
window.location.replace(redirectURL);
```

2.  **User provides his login and password**

Once redirected to Rainbow login page, user will be prompted with a form demanding his login and password. This is the only moment when a user is going to be asked for it.

After the submission the user is going to be sent to another page hosted by Rainbow servers informing him that a given application (your application name will appear here) asks for permission for your application to access the **Resource server** data. Once confirmed, the response will lead to step 3.

3.  **Receive access token in the URL fragment**

Finally, the Rainbow Servers will redirect the user to the `redirect_uri` provided by you and connected to your application.

You can now simply grab the `access_token` from the URL, which would look like this:

```
https://YOURREDIRECTURI#access_token=ACCESSTOKEN
```

Make sure that `state` part of the URL, usually added at its end matches the `state` attribute generated by your code in Step 1. Once you have the token string, you can use it to login with token as below:

```javascript
//somewhere in your application:

// OPTION 1: SIGN IN TO SANDBOX SERVER WITH TOKEN

rainbowSDK.connection.signinSandBoxWithToken(tokenString);

// OPTION 2: SIGN IN TO OFFICIAL RAINBOW SERVER WITH TOKEN

rainbowSDK.connection.signinOnRainbowOfficialWithToken(tokenString);
```

You will receive the same set of logs and information in your console as in case of 'traditional' connection via `rainbowSDK.connection.signin()` API method.

#### Security

Implicit flow does not involve a third-party server (or, according to the vocabulary presented above- an **Authorization Server**). Therefore, there is no entity which can verify an **Application Secret**. As the whole flow happens between a browser and **Resource Server** (Rainbow server), the **usage of Application Secret is strictly forbidden for security reasons**.

You should never share your Application Secret via a browser request. No matter how good it is encrypted, there is always a way to reverse-engineer it and compromise your application credentials. That can lead to a serious security breach and, for example, a fraud of your credit card funds.

To mitigate the risk of passing an **Authentication Token** as the fragment of URL, always use the secure TLS protocol (HTTPS).

#### Refreshing the token

In order to prevent token to be stolen from your browser history (in case an attacker has an access to your device), the expiry time of the token is set to one hour. What is more, we do not provide the so-called refresh token. The user needs to simply revisit the Rainbow authentication page after 60 minutes from the creation of the original token. After this time you should see an error in your browser console indicating that you can't use the API to refresh the token. It is an indication for you to reconnect again. On top of that, the event `rainbowSDK.connection.RAINBOW_ONUSERTOKENRENEWFAILED` will be emitted informing you about a failed attempt to refresh the token.

### Authorization Code flow

Authorization Code is obtained by using an authorization server between the client and the resource owner. The specification of this flow can be found [here](https://tools.ietf.org/html/rfc6749#section-1.3.1).

A simple implementation of a back-end and front-end application is available on our GitHub account: [OAuth - Rainbow Web SDK](https://github.com/Rainbow-CPaaS/OAuth-Rainbow-Web-SDK).

### Integrating with your application

If you're using the Rainbow Login to enable account creation and login, design your button to be as fast and easy to recognize as possible. Use below recommendations for colors, labels and Rainbow branding.

#### Button colors and labels

Color is one of the best ways to recognize something quickly. The more quickly people recognize what your button is and does, the faster they want to click or tap on it and the more seamless the experience.

Recommended button color is blue (`#1b85e0`) with the official Rainbow logo (refer also to the “Rainbow branding” section below). You can also use a white or light colored background.

Recommended labels within the button are as follow:

-   "Continue with Rainbow"
    
-   “Sign in with Rainbow”
    
-   "Login with Rainbow"
    

You can choose the font, font weight, font size and kerning that looks best in your application, but optimize for easy legibility. Use a white text color for the blue button or a blue text color (`#1b85e0`) for the white/light colored button.

#### Rainbow branding

The Rainbow logo is available in various sizes for button scaling purposes, but the proportions and typography style must stay consistent. Download the Rainbow logo version [here](/oauth/logo__rainbow.svg.zip)

Don't use any other logo and don’t modify the Rainbow logo (such as by changing the design, scale or color) that can give the impression that your application is untrustworthy.

#### Additional short note

Including a short note next to your Login button can further increase the user experience, e.g. by describing the benefit of logging in with Rainbow:

· Login with Rainbow so you can connect with your business contacts

· In a hurry? Log in with Rainbow

#### Automatic Styling using SDK

Alternatively, you can use one of the methods provided by Rainbow Web SDK that will automatically style an HTML element present in your DOM. It will save you time needed for styling, providing a ready-to-use format of a button.

To use this method, just follow the steps below:

1.  Include the following element in your HTML document. Please keep the class name as in the example below:

```html
<button class="SignInWithRainbow" />
```

2.  Call the SDK method `styleSignInWithRainbowButton()` that takes the following arguments `color` (can be either `white` or `blue`) and `size` (you can choose between `small`, `medium` and `large`).

```javascript
rainbowSDK.connection.styleSignInWithRainbowButton("white", "small"); // button size: 200 x 20 px
rainbowSDK.connection.styleSignInWithRainbowButton("blue", "medium"); // button size: 250 x 30 px
rainbowSDK.connection.styleSignInWithRainbowButton("white", "large"); // button size: 350 x 40 px
```

Once the method is called, the styles should be applied to the existing button.

*Last updated April, 26th 2021*

### On this page

-   [OAuth Authentication](/docs/sdk/web#name-oauth-authentication-0)
-   [Basic Concepts](/docs/sdk/web#name-basic-concepts-18)
-   [Access token](/docs/sdk/web#name-access-token-49)
-   [Requirements](/docs/sdk/web#name-requirements-61)
-   [Implicit flow](/docs/sdk/web#name-implicit-flow-92)
-   [Security](/docs/sdk/web#name-security-198)
-   [Refreshing the token](/docs/sdk/web#name-refreshing-the-token-210)
-   [Authorization Code flow](/docs/sdk/web#name-authorization-code-flow-216)
-   [Integrating with your application](/docs/sdk/web#name-integrating-with-your-application-225)
-   [Button colors and labels](/docs/sdk/web#name-button-colors-and-labels-231)
-   [Rainbow branding](/docs/sdk/web#name-rainbow-branding-263)
-   [Additional short note](/docs/sdk/web#name-additional-short-note-272)
-   [Automatic Styling using SDK](/docs/sdk/web#name-automatic-styling-using-sdk-284)

---

Was this content helpful to you?YesNo

Feedback